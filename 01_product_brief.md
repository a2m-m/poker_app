# 1. Product Brief（確定版 / AIフレンドリー）

## 1.1 プロダクト概要
**トランプ1組だけでテキサスホールデム（キャッシュゲーム）を回すための、タブレット1台 “パス＆プレイ” ディーラー支援アプリ。**  
物理チップは使わず、**チップ（スタック）・ベット・ポット**はアプリ上で一貫して管理する。  
カードは物理（トランプ）で配り、アプリは「進行管理＋数値管理＋ガイド＋任意の役確認」を担う。

## 1.2 想定利用シーン / ターゲット
- 家・飲み会・旅行先など「**トランプしかないがポーカーがしたい**」場面
- 参加人数：**2〜9人**
- 初心者が混じりやすい（ガイドの価値が高い）
- 端末：**タブレット1台、横持ち固定**で卓内を回す

## 1.3 目的（このアプリが解決すること）
1. **進行の停滞をなくす**  
   - 「誰の番？」「次どうする？」を画面で明確化
2. **計算・記録ミスをなくす**  
   - スタック/ベット/ポットの自動計算で、手作業を排除
3. **ルールの揉めを減らす**  
   - 役一覧（チートシート） + 任意入力の判定ツールを用意し「困ったときだけ助ける」

## 1.4 コアコンセプト（最重要設計原則）
- **状態が一目で分かる**（次の手番、ラウンド、SB/BB、ポット、各人スタック・投入額）
- **入力は少タップ**（回す運用＆誤タップ前提のUI）
- **ガイドは押し付けない**（初心者向けに“次にできること”を提示するが、最終判断はプレイヤー）
- **ローカル完結**（初期はアカウント・同期なし）

## 1.5 用語定義（実装でブレないための固定）
- **プレイヤー**：参加者。名前とスタック（所持チップ）を持つ  
- **スタック**：プレイヤーの所持チップ（アプリ上の数値）
- **ポット**：そのハンドで賭けられた合計チップ
- **ラウンド（ベッティングラウンド）**：Preflop / Flop / Turn / River
- **投入額（this street bet）**：そのラウンドでプレイヤーが既に入れている額
- **最大投入額（to call）**：そのラウンドでテーブル上の最大投入額（Callで揃える対象）
- **ボタン**：ディーラーポジション（手番順の基準）
- **SB/BB**：スモール/ビッグブラインド

## 1.6 スコープ（MVPでやること）

### A. ゲームセットアップ
- 人数（2〜9）を選択
- 各プレイヤーの名前を登録
- 初期スタックを設定（全員同額でOK、将来拡張は可能）
- SB/BBを設定（例：5/10など）
- ボタン初期位置を決める（方法はUI側で選択 or ランダム）

### B. ハンド進行（状態遷移）
- ハンド開始 → ブラインド徴収（SB/BBを自動でスタックから減算しポットへ）
- Preflop → Flop → Turn → River → Showdown → ハンド終了
- 各ラウンドで、**手番が回る**（Foldした人は以後スキップ）
- ラウンド終了条件（最低限）  
  - 参加中の全員が「Fold」または「最大投入額に揃う（Call/Check）」 + 「最後のベット/レイズに対する応答が完了」

### C. アクション入力
- ボタンは大きく：**Check / Call / Bet / Raise / Fold**
- Bet/Raiseは金額入力が必要
- UIは状況に応じて「不可能な選択肢」を出さない（例：チェック不可ならCheck非表示）

### D. チップ（数値）管理
- アクションのたびに自動で以下を更新：
  - 各プレイヤーのスタック
  - 各プレイヤーの投入額（当該ラウンド）
  - ポット
  - 最大投入額（to call）

### E. ガイド表示（初心者向け）
- 常時表示：**「〇〇さんの番です」**
- 常時表示：現在ラウンド（Preflop/Flop/Turn/River）
- ラウンド遷移時の短い案内（例：「フロップを3枚めくって次のベットへ」）

### F. 役確認（任意機能）
- **役一覧（チートシート）**：いつでも開ける
- **勝者判定ツール（任意）**：迷った時だけ入力して判定
  - 入力：共有カード（0〜5枚） + 各プレイヤーの手札（2枚）
  - 出力：強い役、勝者（同点含む）
  - 位置づけ：**補助**（MVPでは必須フローにしない）

### G. 操作取り消し
- **Undo（直前のアクション1手戻し）**
- ハンドをやり直し（リセット）

## 1.7 非ゴール（MVPではやらない）
- **サイドポット（なし）**
- トーナメント（ブラインド上昇・脱落管理）
- オンライン対戦・アカウント・クラウド同期
- 統計/履歴ダッシュボード
- 派手な演出（最初は不要）

## 1.8 重要な前提ルール（サイドポット無しのため）
- キャッシュゲームだが、MVPでは **サイドポット計算をしない**  
- そのため、オールイン等でサイドポットが発生しうる状況は、アプリとしては以下のどちらかで扱う（後続のルールドキュメントで明文化する）：
  1) **卓ルールで禁止**：サイドポットが発生する賭け方をしない  
  2) **例外扱い**：発生したハンドだけアプリ外で手計算し、結果だけ反映
- 本Product Briefでは、実装者は「サイドポット無し」を厳守すること

## 1.9 UI/UX前提
- **横持ち固定**
- みんなが見る：フォント大きめ、重要情報を最上段に集約
- 1画面で最低限わかるべき情報：
  - 現在ラウンド
  - SB/BBと現在のボタン位置
  - 次の手番（強調）
  - ポット
  - 各プレイヤー：名前 / スタック / 今ラウンド投入額 / 状態（Fold等）

## 1.10 成功条件（受け入れ条件 / Acceptance）
MVPが「できた」と言える条件：
- 2〜9人でゲーム開始でき、**1ハンドを最後まで進行**できる
- すべてのアクションで **ポット/スタック/投入額が矛盾なく更新**される
- 画面に常に「次の手番」が表示され、迷わず回せる
- 役一覧がいつでも開ける
- Undoが最低限機能する

## 1.11 実装/運用前提（リポジトリ）
- ドキュメントはGitHubで管理し、Codexはドキュメント参照で開発
- 公開はGitHub Pages（= Webアプリとして提供）
- 初期はローカル完結（データ永続は最低限でOK、将来拡張）
